<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>数据链路层</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 237, 214, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 237, 214, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(249, 228, 188, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="10308fd0-d0de-80a4-8546-ca29f634e612" class="page sans"><header><h1 class="page-title">数据链路层</h1><p class="page-description"></p></header><div class="page-body"><figure id="10408fd0-d0de-8037-aa2e-f16736590686" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20131130.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20131130.png"/></a></figure><h1 id="10308fd0-d0de-8043-948a-fdcb28bfed39" class="">1. 数据链路层概述</h1><h2 id="10408fd0-d0de-80fb-842e-f01846f977bf" class="">1.1 关键词释义</h2><ul id="c1d69de4-1aa3-4edd-a3a6-34f2e2b86a47" class="bulleted-list"><li style="list-style-type:disc">结点：将在本层协议运行的任何设备均称为<strong>结点</strong>，其包括主机、路由器、交换机等。</li></ul><ul id="10408fd0-d0de-807a-9395-dd72934fb390" class="bulleted-list"><li style="list-style-type:disc">链路：就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。</li></ul><ul id="10408fd0-d0de-80d3-ba81-ffdb8cbf7b58" class="bulleted-list"><li style="list-style-type:disc">数据链路：是指把实现通信协议的硬件和软件加到链路上，就构成了数据链路</li></ul><ul id="10408fd0-d0de-80f2-9463-caf854f8d0ce" class="bulleted-list"><li style="list-style-type:disc">帧：点对点数据链路层的协议数据单元</li></ul><figure id="10408fd0-d0de-807b-9c9f-eb4cbbb04bac" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20111649.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20111649.png"/></a></figure><ul id="e5eb4a29-6c14-45f2-9aec-2a8173504b97" class="toggle"><li><details open=""><summary>在此可以将模型简化为3层，点对点信道的数据链路层在进行通信时的主要步骤如下：</summary><p id="10408fd0-d0de-807a-a2b0-e122d1924bca" class="">（1）节点 A 的数据链路层把网络层交下来的 IP 数据报添加首部和尾部封装成帧。<br/>（2）节点 A 把封装好的帧发送给节点 B 的数据链路层。<br/>（3）若节点 B 的数据链路层收到的帧无差错，则从收到的帧中提取出 IP 数据报交给上<br/>面的网络层；否则丢弃这个帧。<br/></p></details></li></ul><h2 id="10408fd0-d0de-8070-81d7-de262f4396a7" class="">1.2 数据链路层基本问题</h2><p id="10408fd0-d0de-8015-a814-ff881364e434" class="">数据链路层在物理层提供的服务基础上<strong>向网络层提供服务</strong>，其最基本的服务是将源自网络层来的数据<strong>可靠地</strong>传输到相邻结点的目标机网络层。其主要作用是<strong>加强物理层传输原始比特流的功能</strong>，将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的路。</p><p id="87008ae9-fe61-4888-96c2-0a62b0752dc0" class="">数据链路层协议有许多种，但有三个基本问题则是共同的。这三个基本问题是：<strong>封装成帧</strong>、<strong>透明传输</strong>和<strong>差错检测</strong>。下面分别讨论这三个基本问题。</p><h3 id="10408fd0-d0de-805b-96ec-e42d20abdb08" class="">1.2.1 封装成帧</h3><figure id="262b825d-76fb-4b00-904a-5bd93c580d0d" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20132511.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20132511.png"/></a></figure><p id="10408fd0-d0de-8037-a155-dd5a3abd5c9c" class=""><strong>封装成帧(framing)就是在一段数据的前后分别添加首部和尾部，这样就构成了一个帧</strong>。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。下图表示用帧首部和帧尾部封装成帧的一般概念。</p><figure id="10408fd0-d0de-8049-b75b-cc5e27854b00" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20124501.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20124501.png"/></a></figure><p id="10408fd0-d0de-8037-8932-f6338e60c822" class="">我们知道，分组交换的一个重要概念就是：所有在互联网上传送的数据都以分组(即 IP 数据报)为传送单位。<strong>网络层的 IP 数据报传送到数据链路层就成为帧的数据部分。在帧的数据部分的前面和后面分别添加上首部和尾部，构成了一个完整的帧。</strong>这样的帧就是数据链路层的数据传送单元。一个帧的帧长等于帧的数据部分长度加上帧首部和帧尾部的长度。首部和尾部的一个重要作用就是进行帧定界 (即确定帧的界限)。</p><p id="10408fd0-d0de-80c4-8d07-e371549e1de2" class="">此外，首部和尾部还包括许多必要的控制信息。在发送帧时，是从帧首部开始发送的。各种数据链路层协议都对帧首部和帧尾部的格式有明确的规定。显然，为了提高帧的传输效率，应当使帧的数据部分长度尽可能地大于首部和尾部的长度。但是，每一种链路层协议都规定了所能传送的帧的数据部分长度上限——最大传送单元 MTU(Maximum Transfer Unit)。上图给出了帧的首部和尾部的位置，以及帧的数据部分与 MTU 的关系。</p><p id="10408fd0-d0de-806e-9022-f9b4605b51b7" class="">如何实现“封装成帧”呢？</p><figure id="10408fd0-d0de-8054-aa56-fbf927879c86" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20130831.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20130831.png"/></a></figure><h3 id="10408fd0-d0de-805a-a97f-d7ddae08b69f" class="">1.2.2 透明传输</h3><p id="10408fd0-d0de-807a-b840-d3340aff679b" class="">透明传输是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就“看不见”有什么妨碍数据传输的东西。<br/>当所传数据中的比特组合恰巧与某一个控制信息完全一样时， 就必须采取适当的措施，使收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。下图为1种情况下引起的错误。<br/><br/></p><figure id="a860afdd-bc00-418f-abdb-afe87cba6e52" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20133823.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20133823.png"/></a></figure><p id="c1852c8b-c6b9-4ef7-822f-282d457cb65b" class="">数据部分如果出现了“帧定界”字符，在其前面插入“转义 字符（ESC 0x1B）。如下图所示。</p><figure id="10408fd0-d0de-800a-9758-fe84e7f7f279" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20134101.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20134101.png"/></a></figure><h3 id="10408fd0-d0de-807e-8aa5-dd9b506d8cf0" class="">1.2.3 差错检测</h3><figure id="08653fe4-9968-4b7d-aa8e-7ddeca73ec60" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/3c681eed9f72b8d2954fac2e4d2e5402.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/3c681eed9f72b8d2954fac2e4d2e5402.png"/></a></figure><p id="10408fd0-d0de-802c-b461-e222cab9c2ae" class="">
</p><h1 id="10408fd0-d0de-807c-a26d-d7876683aaa6" class="">2. 封装成帧与透明传输</h1><h2 id="10408fd0-d0de-8079-a237-c539886400a0" class="">2.1 封装成帧</h2><p id="0faab218-94d9-4852-87b6-65d6c95991c9" class="">封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧。</p><ul id="10408fd0-d0de-800d-8111-c7534514f6cb" class="bulleted-list"><li style="list-style-type:disc">帧头和帧尾中包含有重要的控制信息<figure id="10408fd0-d0de-80ef-8b7e-f49802e85f29" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20135210.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20135210.png"/></a></figure></li></ul><ul id="10408fd0-d0de-80c5-8b72-eaad40e498f8" class="bulleted-list"><li style="list-style-type:disc">帧头和帧尾的作用之一就是<strong>帧定界</strong><p id="10408fd0-d0de-80ee-ab65-c8beb62c42f6" class="">PPP帧中帧头尾均有<strong>1字节的标志位</strong>用于界定帧</p><figure id="10408fd0-d0de-8064-9a49-ccfe8e83da16" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20140059.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20140059.png"/></a></figure></li></ul><p id="10408fd0-d0de-80b5-ae9d-dd3d4267d844" class=""><div class="indented"><p id="10408fd0-d0de-8082-8f2a-e57d43ad257e" class="">以太网版本2的MAC帧在交付给物理层时会在帧前附加<strong>8字节前导码</strong></p><figure id="10408fd0-d0de-805e-b14c-c3b0464cac31" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20140216.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20140216.png"/></a></figure><ul id="57e583ce-eecf-4890-b895-9de3e2d35fad" class="bulleted-list"><li style="list-style-type:disc">前7个字节为<strong>前同步码</strong>，作用使接收方的时钟同步</li></ul><ul id="f2c00257-e9f5-4549-b22b-ad15c130daf9" class="bulleted-list"><li style="list-style-type:disc">最后1字节为<strong>帧开始界定符</strong>，表明后面紧跟着的便是MAC帧</li></ul><ul id="10408fd0-d0de-80c9-be00-cc34892972a0" class="bulleted-list"><li style="list-style-type:disc">此外，以太网V2还规定了<strong>帧间间隔时间</strong>为96比特发送时间（因此不需要帧结束界定符）<figure id="10408fd0-d0de-80b7-8455-d106609e72c7" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a3d0c71e46db5e9c05a614461a52347b.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a3d0c71e46db5e9c05a614461a52347b.png"/></a></figure><p id="10408fd0-d0de-8086-afa0-c82396bd8ff1" class="">帧间间隔还有其他作用，后续会进行说明。</p></li></ul></div></p><h2 id="10408fd0-d0de-8083-88aa-cc1ecac0333b" class="">2.2 透明传输</h2><p id="10408fd0-d0de-8081-9a7c-ca8415bb85f0" class="">透明传输指<strong>数据链路层对上层交付的传输数据没有任何限制</strong>，就好像数据链路层不存在一样。</p><ul id="10408fd0-d0de-8099-aa92-f50622b44cbd" class="bulleted-list"><li style="list-style-type:disc">当上层数据中包含<strong>帧标志符</strong>时，会造成接收方的<strong>误判</strong><figure id="97bd4f3a-5a7e-4e68-be10-84fc10d8d8a5" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/541f0e429bd530c86974493139d6804e.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/541f0e429bd530c86974493139d6804e.png"/></a></figure></li></ul><div id="10408fd0-d0de-804b-ba69-c402b5f84987" class="column-list"><div id="10408fd0-d0de-80ac-aa5e-f434c40c6ac8" style="width:93.75%" class="column"><ul id="10408fd0-d0de-80f4-b385-e503b5ae1c57" class="bulleted-list"><li style="list-style-type:disc">可以在数据中与标识符相同的字段前加上<strong>转义字符</strong>，接收方遇到转义字符便知道其后跟着的数据而非真正的标识符，并且接收方需将该转义字符剔除掉<figure id="10408fd0-d0de-807f-be7a-e05439065262" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/534fac14a23ac8708eaa85f0608c03a8.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/534fac14a23ac8708eaa85f0608c03a8.png"/></a></figure></li></ul></div><div id="10408fd0-d0de-8090-aff9-f68958b4e75b" style="width:6.25%" class="column"><p id="10408fd0-d0de-804a-a4db-d2adcb74cca6" class="">
</p></div></div><ul id="10408fd0-d0de-8053-b779-caf37f61ece8" class="bulleted-list"><li style="list-style-type:disc">但如果数据中还含有和<strong>转义字符相同的字段</strong>，这时便又会引起接收方的<strong>误判</strong>（将本为数据的转义字符剔除），此时将数据中的转义字符前再加上一个转义字符，这样一来接收方每次遇到转义字符时便知道其后紧跟的是数据并剔除该一个转义字符即可<figure id="10408fd0-d0de-80fd-9c96-ca0dcceadafa" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/daf12478ea6d11218d5a57f27bfcbe11.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/daf12478ea6d11218d5a57f27bfcbe11.png"/></a></figure></li></ul><p id="10408fd0-d0de-808a-81a1-c5347f6942e5" class="">综上所述，对于<strong>面向字节的物理链路使用字节填充（或称字符填充）的方法实现透明传输</strong>（如上图所示）；<strong>面向比特的物理链路使用比特填充的方法实现透明传输</strong>（如下图所示）<strong>。</strong></p><figure id="10408fd0-d0de-80f8-bb40-c2dc9a708cd1" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20141319.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20141319.png"/></a></figure><h1 id="10408fd0-d0de-80b0-8268-c315c5a965e2" class="">3. 差错检测</h1><p id="10408fd0-d0de-803e-a6b2-fa9b1f4aba1b" class="">实际的通信链路都不是理想的，比特在传输的过程中可能会产生差错：1可能变为0，而0也可能变为1，这称为<strong>比特差错</strong>。在一段时间内，<strong>传输错误的比特占所传输比特总数的比率称为误码率BER</strong>（Bit Error Rate）。使用差错检测码来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一。</p><figure id="10408fd0-d0de-80eb-817a-c970012310df" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/9fd8e643ec69c2f88c2e832a4e1a7163.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/9fd8e643ec69c2f88c2e832a4e1a7163.png"/></a></figure><p id="0b76b361-a624-4295-a274-54a68f8ec032" class="">以上两种帧格式都包含帧检验序列FCS字段。</p><p id="133fa8a6-11fb-40fd-8335-228d88471249" class="">首先介绍比较简单的奇偶校验。</p><h2 id="10408fd0-d0de-808d-99eb-da585a407033" class="">3.1 奇偶校验</h2><ul id="10408fd0-d0de-8010-a078-fc7a74f050d4" class="bulleted-list"><li style="list-style-type:disc">在待发送的数据后面<strong>添加1位奇偶校验位</strong>，使整个数据（包括所添加的校验位在内）中**“1”的个数**为奇数（奇校验）或偶数（偶校验）</li></ul><ul id="10408fd0-d0de-80c3-afa2-c341d066401b" class="bulleted-list"><li style="list-style-type:disc">如果有<strong>奇数个位发生误码</strong>，则奇偶性发生变化，<strong>可以检查出误码</strong></li></ul><ul id="10408fd0-d0de-804b-a879-e2d1259c7552" class="bulleted-list"><li style="list-style-type:disc">如果有<strong>偶数个位发生误码</strong>，则奇偶性不发生变化，<strong>不能检查出误码（漏检）</strong></li></ul><figure id="10408fd0-d0de-80ce-8e02-d04f98fee807" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4adbc51fd27b4fab49bb9234f9c6e6e9.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4adbc51fd27b4fab49bb9234f9c6e6e9.png"/></a></figure><p id="10408fd0-d0de-80ec-998f-e8f59016c75c" class="">由于这两种校验方法的漏检率较高，故通常不会采用，下面介绍一种有效的检测方法。</p><h2 id="10408fd0-d0de-800b-9fae-f4f2949a441c" class="">3.2 循环冗余校验CRC（Cyclic Redundancy Check）</h2><p id="10408fd0-d0de-80b0-9f9d-e78c39a61ec4" class="">其方法如下：<div class="indented"><ul id="5607fc3c-9208-4b83-97ea-d4ccece687c4" class="bulleted-list"><li style="list-style-type:disc">收发双方约定好一个生成多项式G(X);</li></ul><ul id="10408fd0-d0de-8070-8979-e9f5c23533ba" class="bulleted-list"><li style="list-style-type:disc">发送方基于待发送的数据和生成多项式计算出差错检测码（冗余码），将其添加到待传输数据的后面一起传输;</li></ul><ul id="10408fd0-d0de-803d-831f-d7097b6ca798" class="bulleted-list"><li style="list-style-type:disc">接收方通过生成多项式来计算收到的数据是否产生了误码<br/><br/></li></ul><figure id="10408fd0-d0de-80b0-acb5-c29687a4d451" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20143158.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20143158.png"/></a></figure></div></p><p id="10408fd0-d0de-80c4-bffa-ecbd64318c4f" class="">下面举一个例子来说明：</p><figure id="10408fd0-d0de-80df-a00c-d7f5d798d1b7" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/38dce97219bc9aa63e611efa4271c41a.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/38dce97219bc9aa63e611efa4271c41a.png"/></a></figure><figure id="10408fd0-d0de-80b3-b38f-f749a634919f" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/5795cc52a618331e77f9248c479f11f9.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/5795cc52a618331e77f9248c479f11f9.png"/></a></figure><figure id="10408fd0-d0de-8069-aaa6-ea8f65eb4039" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/ad5584a032a1039584f6e95f6fdacd64.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/ad5584a032a1039584f6e95f6fdacd64.png"/></a></figure><ul id="10408fd0-d0de-8024-8c43-f5efd9c603fb" class="bulleted-list"><li style="list-style-type:disc">检错码只能检测出帧在传输过程中出现了差错，但并不能定位错误，因此无法纠正错误</li></ul><ul id="10408fd0-d0de-80ce-b381-cc456ff54664" class="bulleted-list"><li style="list-style-type:disc">想要纠正传输中的差错，可以使用冗余信息更多的纠错码进行前向纠错。但纠错码的开销比较大，在计算机网络中较少使用</li></ul><ul id="10408fd0-d0de-802e-9d8e-e32ecdbe292d" class="bulleted-list"><li style="list-style-type:disc">循环冗余校验CRC有很好的检错能力（漏检率非常低），虽然计算比较复杂，但是非常易于用硬件实现，因此被广泛应用于数据链路层</li></ul><ul id="10408fd0-d0de-8081-8e20-c3a7434333e3" class="bulleted-list"><li style="list-style-type:disc">在计算机网络中通常采用检错重传方式来纠正传输中的差错，或者仅仅是丢弃检测到差错的帧，这取决于数据链路层向其上层提供的是可靠传输服务还是不可靠传输服务</li></ul><h1 id="10408fd0-d0de-8071-8036-efbf282aa548" class="">4.可靠传输</h1><h2 id="10408fd0-d0de-808c-9317-fa644d9154cd" class="">4.1 可靠传输的基本概念</h2><ul id="a6de5403-826c-4398-a5b6-efc21a5f6425" class="bulleted-list"><li style="list-style-type:disc">数据链路层向上层提供的服务类型<ul id="10408fd0-d0de-803f-9d29-e7207c8171a6" class="bulleted-list"><li style="list-style-type:circle">不可靠传输服务：仅仅丢弃有误码的帧，其他什么也不做</li></ul><ul id="10408fd0-d0de-8029-8fe8-d9d031876a01" class="bulleted-list"><li style="list-style-type:circle">可靠传输服务：想办法实现发送端发送什么，接收端就收到什么</li></ul></li></ul><ul id="10408fd0-d0de-8057-b164-f6bd799ac127" class="bulleted-list"><li style="list-style-type:disc">一般情况下，<strong>有线链路</strong>的误码率较低，为了减小开销，并不要求数据链路层向上提供可靠传输服务。即使出现了误码，可靠传输的问题由其上层处理</li></ul><ul id="10408fd0-d0de-807c-bb0b-e6a59b0bf1d4" class="bulleted-list"><li style="list-style-type:disc"><strong>无线链路</strong>易受干扰，误码率比较高，因此要求数据链路层必须向上层提供可靠传输服务</li></ul><ul id="10408fd0-d0de-807c-8c4e-e21eae273b2c" class="bulleted-list"><li style="list-style-type:disc">比特差错只是传输差错中的一种。从整个计算机网络体系结构来看，传输差错还包括<strong>分组丢失</strong>、<strong>分组失序</strong>以及<strong>分组重复</strong>（这些传输差错一般出现在数据链路层的上层）</li></ul><ul id="10408fd0-d0de-80ff-bc10-d5120db135b3" class="bulleted-list"><li style="list-style-type:disc">可靠传输服务并不仅局限于数据链路层，其他各层均可选择实现可靠传输<figure id="10408fd0-d0de-8021-8b81-da2bc1ebfe11" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/edb5e17b0080aa89f3ae18ca456d0702.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/edb5e17b0080aa89f3ae18ca456d0702.png"/></a></figure></li></ul><h2 id="10408fd0-d0de-8019-a02d-de63c478af53" class="">4.2 <strong>停止等待协议SW（Stop-and-Wait）</strong></h2><figure id="10408fd0-d0de-8063-8b73-f0941b90598b" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20150845.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20150845.png"/></a></figure><p id="10408fd0-d0de-8066-8ad5-fc98a4831018" class="">下面讲述的三种可靠传输协议，不仅局限于数据链路层，还可以应用到计算机网络体系结构的各层协议中。其具体方法如下：<div class="indented"><ol type="1" id="1c1989c6-2d52-4a86-8a8c-8a0d1ba07351" class="numbered-list" start="1"><li>发送方向接收方<strong>发送数据</strong></li></ol><ol type="1" id="244a2e8e-317c-4553-af0e-9d89010770b4" class="numbered-list" start="2"><li>接收方通过<strong>差错检测</strong>若无误码则接收并向发送方发送<strong>确认分组（ACK）</strong></li></ol><ol type="1" id="7fa2ad12-116c-4de6-acba-8c1ef97edf46" class="numbered-list" start="3"><li>发送方接收到确认分组后便可<strong>删除上条数据的缓存</strong>并发送下一组数据</li></ol><ol type="1" id="872423f0-b9ad-458a-aab4-199ce6803911" class="numbered-list" start="4"><li>若出现了误码，接收方丢弃该数据并向发送方发送<strong>否认分组（NAK）</strong></li></ol><ol type="1" id="7c44d61a-c610-4585-b9d3-b5a97d27b86e" class="numbered-list" start="5"><li>发送方收到否认分组后<strong>重新传送</strong>上一条数据</li></ol></div></p><figure id="10408fd0-d0de-8068-857b-eb58c17b0058" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20151718.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20151718.png"/></a></figure><ul id="10408fd0-d0de-805d-938a-dcd2f61b494f" class="bulleted-list"><li style="list-style-type:disc">当发送的数据中途丢失时，此时接收方未接收到数据便无法响应发送确认或否认分组，而发送方也一直等待接收方的反馈分组，此时陷入一种类似“死锁”的状态。</li></ul><p id="10408fd0-d0de-8069-9f05-dfdf8fb77b07" class="">为解决该问题，可以在发送方发送完一个数据分组时，启动一个<strong>超时计时器</strong>。若到了计时器所设置的<strong>重传时间</strong>而发送方仍收不到接收方的任何ACK或NAK，则重传原来的数据分组，这就叫<strong>超时重传</strong>一般可将重传时间设置为略大于“从发送方到接收方的平均往返时间”，原理如下图所示。</p><figure id="10408fd0-d0de-8025-a2bb-c004c192f969" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152041.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152041.png"/></a></figure><ul id="10408fd0-d0de-80d6-a808-e41fbdd7ce8f" class="bulleted-list"><li style="list-style-type:disc">若接收方发送的确认分组中途丢失，这时超过重传时间后发送方又将上条数据重发，此时接收方便接收到了两条同样的数据，应当丢弃第二次重发的数据。</li></ul><p id="002a622d-ec52-4607-b9b9-0944642dc1e0" class="">为避免分组重复这种传输错误，必须给每个分组带上序号。接收方通过编号便可判断是否是重复的数据，对于重复的数据丢弃即可对于停止-等待协议，由于每发送一个数据就停止等待，只要保证每发送一个新的数据分组，其发送序号与上次发送的数据分组的序号不同就可以了，因此用一个比特来编号就够了。</p><figure id="10408fd0-d0de-80d9-93e3-d92f2700e9d2" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152301.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152301.png"/></a></figure><ul id="10408fd0-d0de-80a0-ab1a-d35a21a61adf" class="bulleted-list"><li style="list-style-type:disc">若接收方发送的确认分组迟到，并且在迟到期间发送方重发了上条数据A，确认分组到达后又紧接着发送了下一条数据B，接收方收到重复的数据将其丢弃并发送确认分组，这时发送方接收到确认分组后会误以为是数据B的确认信号则会立即发送下条数据。</li></ul><p id="4d9ab3f8-b72b-481f-9c1a-b4f7807d4ffe" class="">这里应当忽略重复的确认分组，而是等到真正的数据B确认分组传达后再发送下条数据，因此同样的<strong>还需给确认分组编号</strong>，遇到重复的确认分组将其忽略对于数据链路层的点对点信道，往返时间比较固定，不会出现确认迟到的情况，因此若只是在数据链路层实现停止-等待协议，可以不用给确认分组编号。</p><figure id="10408fd0-d0de-8081-8265-f5d6c45d1eb6" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152501.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20152501.png"/></a></figure><ul id="10408fd0-d0de-800e-8491-db170c758457" class="bulleted-list"><li style="list-style-type:disc">停止-等待协议的信道利用率：<figure id="10408fd0-d0de-8035-9fc4-cb0f15e23f27" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/7b186ad77766b112e016db0f2079a3b3.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/7b186ad77766b112e016db0f2079a3b3.png"/></a></figure><figure id="5d197ce8-e949-49b5-8245-767fa6dbb3fb" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/c3de34ba9e619124e132c157c589a87c.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/c3de34ba9e619124e132c157c589a87c.png"/></a></figure><ul id="10408fd0-d0de-80f3-90a9-e8e47fcbbd62" class="bulleted-list"><li style="list-style-type:circle">当往返时延RTT远大于数据帧发送时延时（例如使用卫星链路），信道利用率非常低</li></ul><ul id="10408fd0-d0de-80d7-8da1-cc9ae646dec7" class="bulleted-list"><li style="list-style-type:circle">若出现重传，则对于传送有效的数据信息来说，信道利用率更低</li></ul><ul id="a167b54f-3fe7-4e46-b15d-321af52a77b4" class="bulleted-list"><li style="list-style-type:circle">为克服停止-等待协议信道利用率很低的缺点，便产生另外两种协议（后退N帧协议GBN 和 选择重传协议SR）</li></ul></li></ul><h2 id="10408fd0-d0de-800c-aded-e8f7d36f2483" class="">4.3 <strong>回退N帧协议GBN（Go-Back-N）</strong></h2><p id="10408fd0-d0de-8045-98f2-d28a5c445a07" class="">其具体方法如下：<div class="indented"><ol type="1" id="10408fd0-d0de-8026-838c-e755a81cdbd5" class="numbered-list" start="1"><li> 采用n个比特给分组遍序号，即序号0 ~n-1，本例取为3</li></ol><ol type="1" id="10408fd0-d0de-80fd-aa21-e316fe2da7d2" class="numbered-list" start="2"><li>发送窗口的尺寸范围为：（本例取为5）<figure id="10408fd0-d0de-8066-8fed-c519710f4c03" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1</mn><mo>≤</mo><msub><mi mathvariant="normal">W</mi><mi mathvariant="normal">T</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1\leq\mathrm{W}_{\mathrm{T}}\leq2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0139em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></figure></li></ol><ol type="1" id="10408fd0-d0de-805f-b7a1-f76474027f72" class="numbered-list" start="3"><li>接收窗口的尺寸范围为：<figure id="10408fd0-d0de-8039-a3f7-ea6970707534" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">W</mi><mi mathvariant="normal">T</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mathrm{W}_{\mathrm{T}}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathrm" style="margin-right:0.01389em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0139em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></figure></li></ol></div></p><p id="10408fd0-d0de-80ad-bfa3-c29c92c70dd5" class="">下面举例说明：</p><figure id="10408fd0-d0de-80f4-a95a-fd14442f8e59" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20161304.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20161304.png"/></a></figure><p id="10408fd0-d0de-808b-8db5-f7dca1954f60" class=""><div class="indented"><ol type="1" id="76f5790e-1f6a-4d3c-8cac-86c7d8a92a4d" class="numbered-list" start="1"><li>发送方先连续发送5个数据帧</li></ol><ol type="1" id="d052992b-0c8c-47f7-ac98-5d1f29596b3c" class="numbered-list" start="2"><li>接收方逐个接收到数据帧，并返回每个数据帧的确认分组</li></ol><ol type="1" id="4ac1952d-ca3e-4d56-a9fa-acc45e5fc299" class="numbered-list" start="3"><li>发送方每接收到一个确认分组便移动一位发送窗口，再执行步骤1</li></ol><figure id="10408fd0-d0de-804b-bc61-e9c692bbd296" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a475cac56275b98cb686bfe7465600ea.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a475cac56275b98cb686bfe7465600ea.png"/></a></figure><ul id="10408fd0-d0de-8087-a811-dd3886ade123" class="bulleted-list"><li style="list-style-type:disc">累计确认<p id="85659b17-422b-44ca-ba80-240ddc8c31d6" class="">接收方不一定要对收到的数据分组逐个发送确认，而是可以在收到几个数据分组后（由具体实现决定），对按序到达的最后一个数据分组发送确认。<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">{ACK}_{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>表示序号为<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></span><span>﻿</span></span>及以前的所有数据分组都已正确接收。</p><figure id="10408fd0-d0de-80d9-99f0-f6fc331f3125" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4f201a8fcee7c388ccf28b645f5b9c67.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4f201a8fcee7c388ccf28b645f5b9c67.png"/></a></figure><p id="10408fd0-d0de-807e-b8d3-fa33966b5820" class="">这里接收方产生了两个确认分组<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">{ACK}_{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>和<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">{ACK}_{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>，若途中<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">{ACK}_{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>丢失，发送方收到<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">{ACK}_{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>后也可知道序号4及以前的数据分组均已正确接收。</p><ul id="10408fd0-d0de-809e-bfa0-cb9b8dac1501" class="bulleted-list"><li style="list-style-type:circle">优点：<ul id="10408fd0-d0de-8073-a983-c58089e2f05e" class="bulleted-list"><li style="list-style-type:square">即使确认分组丢失，发送方也可能不必重传</li></ul><ul id="10408fd0-d0de-805c-ac0a-d4554a26e88e" class="bulleted-list"><li style="list-style-type:square">减少接收方开销、减少对网络资源占用</li></ul></li></ul><ul id="6b064407-3729-46b8-a73b-cd6b7d8eec55" class="bulleted-list"><li style="list-style-type:circle">缺点：<ul id="10408fd0-d0de-800c-84e6-c7b7dc0b22c2" class="bulleted-list"><li style="list-style-type:square">不能向发送方及时反映接收方已经确认接收的数据分组信息</li></ul></li></ul></li></ul><ul id="10408fd0-d0de-8052-be5d-e0531a932039" class="bulleted-list"><li style="list-style-type:disc">有差错情况<figure id="10408fd0-d0de-80c2-945a-e43bde4ef7ae" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/cb05d36ce7b46dc9944f4736f2822181.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/cb05d36ce7b46dc9944f4736f2822181.png"/></a></figure><p id="10408fd0-d0de-80a1-9d15-d52d718ccdc7" class="">此时5号数据出现误码被丢弃，而其余的数据分组与接收窗口的序号不匹配，也会被丢弃。接着接收方会对之前按序接收的最后一个分组进行确认，每丢弃一个数据分组就发送一个确认分组（<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>A</mi><mi>C</mi><mi>K</mi></mrow><mn>4</mn></msub></mrow><annotation encoding="application/x-tex">{ACK}_{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>）。</p><p id="10408fd0-d0de-8039-b75b-c438eeb4f982" class="">发送方收到重复的确认，便知道之前所发送的数据分组出现了差错，于是可以不等超时计时器超时就立刻重传（至于收到几个重复确认就立刻重传，由具体实现决定）。</p><blockquote id="fccb64ad-376a-46ac-893b-a4b57bd13173" class="">本例中，尽管序号为6、7、0、1的数据分组正确到达接收方，但由于5号数据分组误码不被接受，它们也受到牵连而不被接受，发送方还需重传这些数据分组，这便是所谓的Go-Back-N。<p id="10408fd0-d0de-80f5-ab86-e79170985818" class="">可见，当通信线路质量不好时，回退N帧协议的信道利用率并不比停止-等待协议高。</p></blockquote><ul id="10408fd0-d0de-8076-bfe8-f8044eb78c7e" class="bulleted-list"><li style="list-style-type:circle">若<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">{W}_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>超过取值范围<figure id="10408fd0-d0de-8052-a877-c0085c3a2734" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/7bcb6cf29c43f3d592c10a66a875fe05.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/7bcb6cf29c43f3d592c10a66a875fe05.png"/></a></figure><p id="10408fd0-d0de-8021-83ce-ea0b66cf0d7b" class="">这里一次性发送8个数据分组，第一遍的确认分组丢失，于是发送方超时重传这8个分组，此时重复分组的序号和接收窗口的序号是匹配的接收方无法分辨新旧数据。</p></li></ul></li></ul><ul id="10408fd0-d0de-8003-ae0d-c442dfa8065b" class="bulleted-list"><li style="list-style-type:disc">总结<figure id="58e72c27-3ecf-4a1d-b731-09ee9b6ad927" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20164002.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20164002.png"/></a></figure></li></ul></div></p><h2 id="10408fd0-d0de-802d-9518-de3620a5bf15" class="">4.4 <strong>选择重传协议SR（Selective Request）</strong></h2><ul id="10408fd0-d0de-802c-a47c-d3f68c9127cb" class="bulleted-list"><li style="list-style-type:disc">回退N帧协议的接收窗口尺寸<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{W}_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span><strong>只能等于1</strong>，因此接收方只能按序接收正确到达的数据分组</li></ul><ul id="10408fd0-d0de-804b-83f1-dcd3643f6b37" class="bulleted-list"><li style="list-style-type:disc">一个数据分组的误码就会导致其后续多个数据分组不能被接收方按序接收而丢弃（尽管它们无乱序和误码）。这必然会造成发送方对这些数据分组的超时重传，显然这时对通信资源的极大浪费</li></ul><ul id="10408fd0-d0de-8086-bda7-e72303e12759" class="bulleted-list"><li style="list-style-type:disc">为了进一步提高性能，可设法只重传出现误码的数据分组。因此，接收窗口的尺寸<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{W}_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span><strong>不应再等于1（而应大于1），以便接收方先收下失序到达但无误码并且序号落在接收窗口内的那些数据分组</strong>，等到所缺分组收齐后再一并送交上层。这就是选择重传协议<br/><br/></li></ul><blockquote id="10408fd0-d0de-8058-b52e-db27d4e6cdd1" class=""><strong>选择重传协议</strong>为了使发送方仅重传出现差错的分组，接收方<strong>不能再采用累积确认</strong>，而需要对每个正确接收到的数据分组进行<strong>逐一确认</strong></blockquote><p id="10408fd0-d0de-807f-ae73-f2b942b8ef8d" class="">下面举例说明：<div class="indented"><ol type="1" id="10408fd0-d0de-8068-975e-f6a27bcc66a8" class="numbered-list" start="1"><li>采用3个比特给分组编序号，即序号0 - 7</li></ol><ol type="1" id="10408fd0-d0de-808b-bda8-fd0b79104843" class="numbered-list" start="2"><li>发送窗口的尺寸<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">{W}_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>为4</li></ol><ol type="1" id="10408fd0-d0de-8010-931c-f7e86f85c17e" class="numbered-list" start="3"><li>接收窗口的尺寸<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">{W}_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span><span>﻿</span></span>为4<figure id="10408fd0-d0de-808b-8181-c2ab7ea81310" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4344ac7c90d33b85eed3e083eabbec64.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/4344ac7c90d33b85eed3e083eabbec64.png"/></a></figure><ol type="1" id="10408fd0-d0de-8048-875a-daf02543c9a4" class="numbered-list" start="1"><li>发送方依次发送0 - 3序号四个数据分组</li></ol><ol type="1" id="10408fd0-d0de-804b-9d26-d699d6a15aa2" class="numbered-list" start="2"><li>其中2号数据分组出现误码，接收方将其丢弃，接收窗口只有按序接收时才可滑动，因此0、1序号数据使窗口向右滑动2位，由于2号数据分组的缺失，窗口需在此停驻</li></ol><ol type="1" id="10408fd0-d0de-8078-a2d8-d111e933705c" class="numbered-list" start="3"><li>数据使窗口向右滑动2位，由于2号数据分组的缺失，窗口需在此停驻</li></ol><figure id="10408fd0-d0de-8098-a5d1-e6c2fc2ebaf3" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171158.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171158.png"/></a></figure><ol type="1" id="f4b980df-c307-4fae-82d6-4d7404213f38" class="numbered-list" start="4"><li>发送方接着发送4、5号数据分组，接收方正确接收后返回响应的确认分组</li></ol><ol type="1" id="10408fd0-d0de-80b7-b7bc-c7e82f4853a3" class="numbered-list" start="5"><li>此时2号分组的重传计时器超时重传，接收方正确接收，由于接收窗口中的数据分组均已按序接收，于是窗口可向右滑动4位（同样的发送方的发送窗口中的确认分组也均按序接收到后也会向右滑动4位）</li></ol><figure id="ce2c996f-5bc0-46d0-a3a2-8dd83cc6448d" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171454.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171454.png"/></a></figure></li></ol></div></p><p id="10408fd0-d0de-80e9-94c6-d9850791c1e8" class="">下面来看另一种情况：<div class="indented"><p id="10408fd0-d0de-8087-b527-ea7f159688e5" class="">当<style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><span data-token-index="0" contenteditable="false" class="notion-text-equation-token" style="user-select:all;-webkit-user-select:all;-moz-user-select:all"><span></span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">{W}_{T}={W}_{R}=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">5</span></span></span></span></span><span>﻿</span></span>时，会发生什么：</p><figure id="10408fd0-d0de-80af-80cf-eaa823547504" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172215.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172215.png"/></a></figure><figure id="bf685393-0145-4847-9cbd-a48191d2b62a" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172339.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172339.png"/></a></figure><figure id="10408fd0-d0de-8061-bf42-f2b01ccfcb3f" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172404.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20172404.png"/></a></figure><p id="10408fd0-d0de-8096-b659-c6906a6c8726" class="">故我们可以做出以下总结。</p></div></p><ul id="10408fd0-d0de-806a-b7cb-c94bc299347c" class="bulleted-list"><li style="list-style-type:disc">总结</li></ul><figure id="10408fd0-d0de-8019-ae1a-e5332833d7ef" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171647.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20171647.png"/></a></figure><h1 id="10408fd0-d0de-80c4-b630-ce43bfa0fa39" class="">5. 点对点协议（PPP）</h1><p id="10408fd0-d0de-8027-8e70-ff12216623cf" class="">点对点协议PPP（Point-to-Point Protocol）是目前使用最广泛的点对点数据链路层协议</p><h2 id="ea9ca937-0268-4318-9b31-910cd6bd933d" class="">5.1 PPP协议的特点</h2><p id="10408fd0-d0de-8030-a226-c10b64dcd2d8" class="">我们知道，互联网用户通常都要连接到某个 ISP 才能接入到互联网。PPP 协议就是用户<br/>计算机和 ISP 进行通信时所使用的数据链路层协议。<br/></p><figure id="10408fd0-d0de-8052-953c-c01ac0b65796" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191347.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191347.png"/></a></figure><ul id="10408fd0-d0de-807c-abcc-cb6816c64e2a" class="bulleted-list"><li style="list-style-type:disc">PPP协议为在点对点链路传输各种协议数据报提供了一个标准方法，主要由以下三部分构成<ul id="10408fd0-d0de-806d-904e-cc723ca520b1" class="bulleted-list"><li style="list-style-type:circle">对各种协议数据报的封装方法（封装成帧）</li></ul><ul id="10408fd0-d0de-807d-9dd0-ded0dcc1d1d6" class="bulleted-list"><li style="list-style-type:circle">链路控制协议LCP，用于建立、配置以及测试数据链路的连接</li></ul><ul id="10408fd0-d0de-806e-b205-f3eb6f561ab4" class="bulleted-list"><li style="list-style-type:circle"> 一套网络控制协议NCPs，其中的每一个协议支持不同的网络层协议</li></ul><figure id="10408fd0-d0de-804b-abe2-c377a5ff3b3d" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191613.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191613.png"/></a></figure></li></ul><h2 id="10408fd0-d0de-80d1-8b0a-f4b0abd76936" class="">5.2 PPP协议的帧格式</h2><h3 id="10408fd0-d0de-801d-8cfd-e64c0f3aba91" class="">5.2.1 各字段含义</h3><p id="10408fd0-d0de-8007-8210-d4fd0cbc8dca" class="">其帧格式如下图所示：</p><figure id="10408fd0-d0de-8018-a04a-f2b8f7b61bac" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191849.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20191849.png"/></a></figure><h3 id="10408fd0-d0de-80cf-b81f-eb2803ce3382" class="">5.2.2 透明传输</h3><ul id="10408fd0-d0de-8047-9990-f989a1ef821d" class="bulleted-list"><li style="list-style-type:disc">面向字节的异步链路采用插入转义字符的字节填充法<figure id="10408fd0-d0de-8079-8c1d-fb5de226ef95" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192304.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192304.png"/></a></figure></li></ul><ul id="10408fd0-d0de-8077-8c7c-f2cf8cd8f090" class="bulleted-list"><li style="list-style-type:disc">面向比特的同步链路采用插入比特0的比特填充法<figure id="10408fd0-d0de-8035-b098-fcca8d3e99ea" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192533.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192533.png"/></a></figure></li></ul><h3 id="76dae9fd-dfe0-4578-9b49-f74ef541c3e1" class="">5.2.3 差错检测</h3><figure id="10408fd0-d0de-8069-a1fd-d58d1348736f" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192804.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20192804.png"/></a></figure><p id="10408fd0-d0de-8028-ae68-ee53b9b2d9a6" class="">接收方每收到一个PPP帧，就进行CRC检验。若CRC检验正确，就收下该帧；反之就丢弃该帧。<strong>使用PPP的数据链路层向上提供的是不可靠传输服务。</strong></p><h2 id="10408fd0-d0de-8088-b0e8-d5c2bed34d64" class="">5.3 PPP协议的工作状态</h2><figure id="8a8a905e-0233-470f-a387-512e882ddc44" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20193017.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20193017.png"/></a></figure><h1 id="10408fd0-d0de-80ad-973c-f98bde77cbf4" class="">6. 媒体访问控制与协议</h1><h2 id="10408fd0-d0de-80c6-aae0-f09898cd632b" class="">6.1 媒体接入控制的基本概念</h2><figure id="10408fd0-d0de-8055-b7ac-f528007ebc28" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194440.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194440.png"/></a></figure><p id="6d5e0cf9-8e71-48f9-928e-b2f98c333777" class="">如上图所示，多个主机连接一条总线，如果恰好有两个或多个结点在同一时刻发送数据，那么信号将要在共享媒体上发生碰撞，这样数据便会发送失败，如下图所示。</p><figure id="10408fd0-d0de-808e-a4e8-c2a48dc53aa3" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194749.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194749.png"/></a></figure><p id="10408fd0-d0de-80b6-bcf4-f224d6e5988e" class="">因此，共享信道要考虑的一个问题就是如何协调多个发送和接收站点对一个共享传输媒体的占用，即媒体接入控制MAC（Medium Access Control）</p><figure id="10408fd0-d0de-802d-8e32-fc8f6074bb85" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194914.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20194914.png"/></a></figure><blockquote id="10408fd0-d0de-80c4-b511-c26d63d73e6d" class="">随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已经完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术。</blockquote><h2 id="10408fd0-d0de-80d7-b8ad-eb29d0ba7383" class="">6.2 <strong>静态划分信道</strong></h2><ul id="10408fd0-d0de-8073-a880-db7c3ba2d7c0" class="bulleted-list"><li style="list-style-type:disc">复用（Multiplexing）是通信技术中的一个重要概念。复用就是通过一条物理线路同时传输多路用户的信号</li></ul><ul id="10408fd0-d0de-803b-9417-d61a0c137c52" class="bulleted-list"><li style="list-style-type:disc"> 当网络中的传输媒体的传输容量大于多条单一信道传输的总通信量时，可以利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽</li></ul><figure id="10408fd0-d0de-8087-a668-c8db5c059efc" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a662694f62d798ded08f1c75da421469.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/a662694f62d798ded08f1c75da421469.png"/></a></figure><h3 id="10408fd0-d0de-800d-b881-e993bd8b64f8" class="">6.2.1 频分复用FDM</h3><figure id="10408fd0-d0de-80db-9fed-e69e2ab5b585" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20201921.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20201921.png"/></a></figure><h3 id="10408fd0-d0de-80ff-b7f3-d310fcbc1f8c" class="">6.2.2 时分复用TDM</h3><figure id="10408fd0-d0de-806a-8467-f8b0e993c90c" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20201959.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20201959.png"/></a></figure><h3 id="10408fd0-d0de-803d-bd60-dd1311df3d77" class="">6.2.3 波分复用WDM</h3><figure id="10408fd0-d0de-80af-9235-e306747c4fd7" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20202055.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20202055.png"/></a></figure><h3 id="10408fd0-d0de-80ee-baaa-e08e3d3cafa7" class="">6.2.4 码分复用CDM</h3><ul id="10408fd0-d0de-80d9-b185-f097eab2b65e" class="bulleted-list"><li style="list-style-type:disc">码分复用CDM是另一种共享信道的方法。实际上，由于该技术主要用于多址接入，人们更常用的名词是码分多址CDMA（Code Division Multiple Access）</li></ul><ul id="10408fd0-d0de-80f3-aee3-cb7096f4d7ef" class="bulleted-list"><li style="list-style-type:disc">同理，频分复用FDM和时分复用TDM同样可用于多址接入，相应的名词时频分多址FDMA（Frequency Division Multiple Access）和时分多址TDMA（Time Division Multiple Access）</li></ul><ul id="10408fd0-d0de-80b5-aebb-dea6a414e62b" class="bulleted-list"><li style="list-style-type:disc">复用和多址概念可简单理解如下：<ul id="544f6f29-bc33-4398-af0a-9abcf16cca2d" class="bulleted-list"><li style="list-style-type:circle">复用是将单一媒体的频带资源划分成很多子信道，这些子信道之间相互独立，互不干扰。从媒体的整体频带资源上看，每个子信道只占用该媒体频带资源的一部分</li></ul><ul id="10408fd0-d0de-805b-b0f0-ce72f71a1ef8" class="bulleted-list"><li style="list-style-type:circle"> 多址（更确切地应该称为多点接入）处理的是动态分配信道给用户。这在用户仅仅暂时性地占用信道的应用中是必须的，而所有的移动通信系统基本上都属于这种情况。相反，在信道永久性地分配给用户的应用中，多址是不需要的（对于无线广播或电视广播站就是这样）</li></ul><ul id="10408fd0-d0de-8019-be47-d67784ccd70f" class="bulleted-list"><li style="list-style-type:circle">某种程度上，FDMA、TDMA、CDMA可以分别看成是FDM、TDM、CDM的应用</li></ul></li></ul><ul id="4041eaf3-7c9f-4528-9544-b28c7b0bbb19" class="bulleted-list"><li style="list-style-type:disc">与FDM和TDM不同，CDM的每个用户可以<strong>在同样的时间使用同样的频带进行通信</strong></li></ul><ul id="10408fd0-d0de-80b6-92eb-f3a9e59e3c74" class="bulleted-list"><li style="list-style-type:disc">由于各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰</li></ul><ul id="10408fd0-d0de-8056-b843-e4945514449b" class="bulleted-list"><li style="list-style-type:disc">CDM最初是用于军事通信的，因为这种系统所发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现</li></ul><ul id="10408fd0-d0de-8003-920d-da403971ce0b" class="bulleted-list"><li style="list-style-type:disc">随着技术的进步，CDMA设备的价格和体积都大幅度下降，因而现在已广泛用于民用的移动通信中</li></ul><ul id="32d98333-3833-45d7-b59c-bc66f4b80a53" class="bulleted-list"><li style="list-style-type:disc">在CDMA中，每一个比特时间再划分为m个短的间隔，称为码片（Chip）。通常m的值是64或128。为了简单期间，后续的举例中，假设m为8</li></ul><ul id="10408fd0-d0de-8046-a49f-ec1cf4f6e6c7" class="bulleted-list"><li style="list-style-type:disc">使用CDMA的每个站被指派一个唯一的m bit码片序列（Chip Sequence）<ul id="10408fd0-d0de-8077-b404-e4c1ef159ce8" class="bulleted-list"><li style="list-style-type:circle">一个站若要<strong>发送比特1</strong>，则<strong>发送它自己的m bit码片序列</strong></li></ul><ul id="10408fd0-d0de-80b2-a3d2-ead18b6a0a74" class="bulleted-list"><li style="list-style-type:circle">一个站若要<strong>发送比特0</strong>，则<strong>发送它自己的m bit码片序列的二进制反码</strong></li></ul><ul id="10408fd0-d0de-80d3-809f-ef972c5e9204" class="bulleted-list"><li style="list-style-type:circle">例：<figure id="0e147177-ff7f-4d17-9594-3aa34f99d743" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20215148.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20215148.png"/></a></figure></li></ul></li></ul><ul id="10408fd0-d0de-8099-ba02-c63e1438b8d9" class="bulleted-list"><li style="list-style-type:disc">码片序列挑选原则如下：<ul id="10408fd0-d0de-808c-b69e-ff3976b47fc7" class="bulleted-list"><li style="list-style-type:circle"> 分配给每个站的<strong>码片序列必须各不相同</strong>，实际常采用伪随机码序列</li></ul><ul id="10408fd0-d0de-8062-b9b8-ca4377de54f4" class="bulleted-list"><li style="list-style-type:circle">分配给每个站的<strong>码片序列必须相互正交</strong>（规格化内积为0）<blockquote id="10408fd0-d0de-803d-b822-fcce9f409b84" class="">令向量S表示站S的码片序列，令向量T表示其他任何站的码片序列。两个不同站的码片序列正交，就是向量S和T的规格化内积为0。<figure id="74757307-5d23-4915-b854-22c17c08e87c" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>T</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn><mspace linebreak="newline"></mspace><mspace linebreak="newline"></mspace><mi>S</mi><mo>⋅</mo><mi>S</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>S</mi><mi>i</mi></msub><msub><mi>S</mi><mi>i</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msubsup><mi>S</mi><mi>i</mi><mn>2</mn></msubsup><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msup><mrow><mo fence="true">(</mo><mo>±</mo><mi>l</mi><mo fence="true">)</mo></mrow><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S\cdot T = \frac{1}{m} \sum_{i=1}^{m}S_{i} T_{i} = 0\\\\S\cdot S = \frac{1}{m} \sum_{i=1}^{m}S_{i}S_{i} = \frac{1}{m} \sum_{i=1}^{m}S_{i}^{2} = \frac{1}{m} \sum_{i=1}^{m}\left(\pm l\right)^{2} = 1               </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span><span class="mspace newline"></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-2.453em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">±</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></figure><figure id="5ed823cc-7a57-4233-94d0-4de12898ebce" class="equation"><style>@import url('https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css')</style><div class="equation-container"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>S</mi><mo separator="true">⋅</mo><mover accent="true"><mi>T</mi><mo>ˉ</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≡</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>S</mi><mo separator="true">⋅</mo><mover accent="true"><mi>S</mi><mo>ˉ</mo></mover></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≡</mo><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}S\cdotp\bar{T}&amp;\equiv 0\\\\S\cdotp\bar{S}&amp;\equiv -1\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8201em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1667em;"><span class="mord">ˉ</span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span></span></span></span></span></span></span></span></span></span></span></span></div></figure></blockquote></li></ul></li></ul><ul id="10408fd0-d0de-80f7-9e0a-d58a6ac330b7" class="bulleted-list"><li style="list-style-type:disc">应用举例：<figure id="146059d7-638f-4d9d-8101-b58ed3acc1b9" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20220956.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20220956.png"/></a></figure></li></ul><h2 id="10408fd0-d0de-80a3-aee3-c1962082b6d5" class="">6.3 <strong>CSMA/CD协议</strong></h2><figure id="10408fd0-d0de-80e0-be4d-f5bf0b7aaf77" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20223538.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20223538.png"/></a></figure><p id="10408fd0-d0de-806b-910c-cee1263f7075" class="">CSMA/CD（Carrier Sense Multiple Access with Collision Detection，载波侦听多路访问/冲突检测）</p><h3 id="10408fd0-d0de-8031-9c71-d11c8edcdb8c" class="">6.3.1 协议中名词解释</h3><ul id="93023336-a994-46ba-b245-54fee453044d" class="bulleted-list"><li style="list-style-type:disc"><strong>多址接入MA</strong><p id="a3ceaee6-fb61-4895-b9cf-51de966c6edb" class="">多个站连接在一条总线上，竞争使用总线</p><figure id="10408fd0-d0de-8004-ad32-dd189607bef1" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225248.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225248.png"/></a></figure></li></ul><ul id="10408fd0-d0de-802b-8998-c66e6706b8e0" class="bulleted-list"><li style="list-style-type:disc"><strong>载波监听CS</strong><p id="10408fd0-d0de-80df-af7a-fab1b9a1ca23" class="">每个站在发送帧之前先要检测一下总线上是否有其他站点在发送帧（先听后说）</p><ul id="10408fd0-d0de-807c-a728-cb13e089aaeb" class="bulleted-list"><li style="list-style-type:circle">若检测到总线空闲96比特时间，则发送该帧</li></ul><ul id="3a092236-2243-45c4-87a9-0a45d6a42d5b" class="bulleted-list"><li style="list-style-type:circle">若检测到总线忙，则继续检测并等待总线转为空闲96比特时间，然后发送该帧<blockquote id="10408fd0-d0de-8099-9e87-f824c6b64c27" class=""><strong>96比特时间</strong>是指发送96bit所耗费的时间，也称为帧间最小间隔。其作用是使接收方可以检测出一个帧的结束，同时也使得所有其他站点都能有机会平等竞争信道并发送帧</blockquote></li></ul><figure id="10408fd0-d0de-8052-98e5-c71c51120d1b" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225016.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225016.png"/></a></figure></li></ul><ul id="10408fd0-d0de-80f3-9a5d-cd6f86082bce" class="bulleted-list"><li style="list-style-type:disc"><strong>碰撞检测CD</strong><p id="10408fd0-d0de-8041-9977-eee13245b735" class="">每个正在发送帧的站边发送边检测碰撞（边听边说）</p><ul id="f571ffd3-a8e5-4d0c-ab2b-3358759e68c8" class="bulleted-list"><li style="list-style-type:circle">一旦发现总线上出现碰撞，则立即停止发送，退避一段随机时间后再次发送（“一旦冲突，立即停说，等待时机，重新再说”）</li></ul><figure id="10408fd0-d0de-80f5-87a9-ca4e575380ab" class="image"><a href="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225217.png"><img src="https://cdn.jsdelivr.net/gh/junmoxiao6661/pigo_image@main/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-09-17%20225217.png"/></a></figure><blockquote id="10408fd0-d0de-8062-9298-c7aac539d53a" class="">以太网还采取了一种叫做<strong>强化碰撞</strong>的措施。这就是当发送帧的站点一旦检测到碰撞，除了立即停止发送帧外，还要再继续发送<strong>32bit或48bit的人为干扰信号</strong>（Jamming Signal），以便<strong>有足够多的碰撞信号使所有站点都能检测出碰撞</strong></blockquote></li></ul><h3 id="10408fd0-d0de-80ac-9b0c-cff342fe5d5a" class="">6.3.2 争用期（碰撞窗口）</h3><p id="10408fd0-d0de-80e8-8306-e481d3ab17ff" class="">
</p><p id="b1f39d11-7ea7-4a0e-b054-51e6f5bf47c8" class="">
</p><p id="8f9b1f8c-b729-4073-ba8c-66287e4d47a7" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>